<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>AcousticAVE library (libaave): audio.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AcousticAVE library (libaave)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">audio.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="aave_8h_source.html">aave.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="dft_8h_source.html">dft.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="idft_8h_source.html">idft.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for audio.c:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c__incl.png" border="0" usemap="#audio_8c" alt=""/></div>
<map name="audio_8c" id="audio_8c">
<area shape="rect" id="node9" href="aave_8h.html" title="aave.h" alt="" coords="264,83,325,112"/><area shape="rect" id="node11" href="dft_8h.html" title="dft.h" alt="" coords="349,83,397,112"/><area shape="rect" id="node13" href="idft_8h.html" title="idft.h" alt="" coords="421,83,472,112"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a11ddec9c2a797ebe5e6b6f2ae522404f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a11ddec9c2a797ebe5e6b6f2ae522404f">DFT_TYPE</a>&#160;&#160;&#160;short</td></tr>
<tr class="separator:a11ddec9c2a797ebe5e6b6f2ae522404f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd47bdf71dbf8a1adbddc63efd267700"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#afd47bdf71dbf8a1adbddc63efd267700">IDFT_TYPE</a>&#160;&#160;&#160;int</td></tr>
<tr class="separator:afd47bdf71dbf8a1adbddc63efd267700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addce93e897e9f71ef5c263ffd893f831"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#addce93e897e9f71ef5c263ffd893f831">AAVE_FADE_SAMPLES</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:addce93e897e9f71ef5c263ffd893f831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7921e52736402cbfff73045ce89695e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a7921e52736402cbfff73045ce89695e7">AAVE_DISTANCE_B1</a>&#160;&#160;&#160;0.99977</td></tr>
<tr class="separator:a7921e52736402cbfff73045ce89695e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a01cdef4fc35ac0cf58e59bed7c2af7d9"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a01cdef4fc35ac0cf58e59bed7c2af7d9">attenuation</a> (float distance)</td></tr>
<tr class="separator:a01cdef4fc35ac0cf58e59bed7c2af7d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ed45f17383de6ca52241b5ac60a10b2"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a0ed45f17383de6ca52241b5ac60a10b2">fade_in_gain</a> (unsigned i, unsigned frames)</td></tr>
<tr class="separator:a0ed45f17383de6ca52241b5ac60a10b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bff6ddd40eda3065aa82561d23e51a6"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a3bff6ddd40eda3065aa82561d23e51a6">fade_out_gain</a> (unsigned i, unsigned frames)</td></tr>
<tr class="separator:a3bff6ddd40eda3065aa82561d23e51a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5949cca50430419a0d66b75f6bf5793a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a5949cca50430419a0d66b75f6bf5793a">cmul</a> (float *a, const float *b, unsigned n)</td></tr>
<tr class="separator:a5949cca50430419a0d66b75f6bf5793a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e6a8bd6af1e6e28fb9f4a59802913d6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a4e6a8bd6af1e6e28fb9f4a59802913d6">cmadd</a> (float *y, const float *a, const float *b, unsigned n, float g)</td></tr>
<tr class="separator:a4e6a8bd6af1e6e28fb9f4a59802913d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dfc247d60dfeb02fe97ae7353731506"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a8dfc247d60dfeb02fe97ae7353731506">aave_audio_source_block</a> (struct <a class="el" href="structaave__sound.html">aave_sound</a> *sound, float distance, short *x, unsigned frames, unsigned <a class="el" href="structdelay.html">delay</a>)</td></tr>
<tr class="separator:a8dfc247d60dfeb02fe97ae7353731506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e68044085a9e60e9d9065100a520b0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0">aave_hrtf_add_sound</a> (struct <a class="el" href="structaave.html">aave</a> *<a class="el" href="structaave.html">aave</a>, struct <a class="el" href="structaave__sound.html">aave_sound</a> *sound, float ydft[3][2][<a class="el" href="aave_8h.html#a19ea3a18eb313fc3b825f522245d19d3">AAVE_MAX_HRTF</a> *4], unsigned <a class="el" href="structdelay.html">delay</a>, unsigned frames)</td></tr>
<tr class="separator:a74e68044085a9e60e9d9065100a520b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0435bc74e8d5edca85e72ab93a72bc37"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37">aave_hrtf_fill_output_buffer</a> (struct <a class="el" href="structaave.html">aave</a> *<a class="el" href="structaave.html">aave</a>, unsigned <a class="el" href="structdelay.html">delay</a>, unsigned frames)</td></tr>
<tr class="separator:a0435bc74e8d5edca85e72ab93a72bc37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe43a0d12af335e2f133c0da2a99422f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f">aave_get_audio</a> (struct <a class="el" href="structaave.html">aave</a> *<a class="el" href="structaave.html">aave</a>, short *buf, unsigned n)</td></tr>
<tr class="separator:afe43a0d12af335e2f133c0da2a99422f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8652f21a39abdea73f6ad975ad7af5fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="audio_8c.html#a8652f21a39abdea73f6ad975ad7af5fd">aave_put_audio</a> (struct <a class="el" href="structaave__source.html">aave_source</a> *source, const short *audio, unsigned n)</td></tr>
<tr class="separator:a8652f21a39abdea73f6ad975ad7af5fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="audio_8c.html">audio.c</a> file contains the functions that implement the core of the auralisation audio processing of the AcousticAVE library (libaave). The following image illustrates the audio processing model of the library, as seen by the user.</p>
<div class="image">
<img src="audio1.png" alt="audio1.png"/>
<div class="caption">
Audio processing model</div></div>
<p>The user passes the anechoic audio data of each sound source in the auralisation world to the library using <a class="el" href="aave_8h.html#a546bf3fff8b9009ddc744a6908154f5e">aave_put_audio()</a> and then retrieves the calculated auralisation binaural audio data using <a class="el" href="aave_8h.html#a8a63aae9a55200e05235e6e89990f1c6">aave_get_audio()</a>.</p>
<p>Although the library supports processing one audio frame at a time, users would typically work with blocks of audio frames at a time, for efficiency reasons of the underlying operating system. Each time, the number of anechoic audio frames (samples) in the blocks passed to each source using <a class="el" href="aave_8h.html#a546bf3fff8b9009ddc744a6908154f5e">aave_put_audio()</a> must be the same for all sources, and the same number of binaural audio frames (samples times 2) must be retrieved using <a class="el" href="aave_8h.html#a8a63aae9a55200e05235e6e89990f1c6">aave_get_audio()</a>.</p>
<p>The current implementation of the library runs most efficiently when the number of audio frames per block is a multiple of the number of samples of the selected head-related transfer functions (HRTF), times 2, as that is the size of the discrete Fourier transforms (DFT) performed internally.</p>
<p>The HRTF set to use for the auralisation process can be selected by calling one of <a class="el" href="aave_8h.html#a9332f29f538c0e54272f61de0e420348">aave_hrtf_cipic()</a>, <a class="el" href="aave_8h.html#a1714770c36978ec1bfc9b4b5148e42be">aave_hrtf_listen()</a>, <a class="el" href="aave_8h.html#aad4aa8bf733bedef0ee981bbeffc1b12">aave_hrtf_mit()</a>, or <a class="el" href="aave_8h.html#afbc85e87d1aaab2c91c7f15d1d5a9906">aave_hrtf_tub()</a>, for the CIPIC, LISTEN, MIT, or TU-Berlin HRTF sets, respectively, and it must be done before ever calling <a class="el" href="aave_8h.html#a546bf3fff8b9009ddc744a6908154f5e">aave_put_audio()</a>.</p>
<p>The following describes the internal implementation details of the audio processing performed by the library to produce the auralisation. Mere users of the library may want to skip the rest of this section.</p>
<div class="image">
<img src="audio2.png" alt="audio2.png"/>
<div class="caption">
Overall audio processing block diagram</div></div>
<p>The above image illustrates the entire auralisation audio processing, performed by <a class="el" href="aave_8h.html#a8a63aae9a55200e05235e6e89990f1c6">aave_get_audio()</a>, from the anechoic audio data of all sound sources present, to the resulting auralisation left and right (binaural) audio data.</p>
<p>Each sound source originates a number of sounds that reach the listener (direct sound and reflection sounds, as many as the <a class="el" href="geometry_8c.html">geometry.c</a> part of the auralisation process is able to find in a given amount of time). Each sound is processed differently according to the travelled distance, direction of arrival, and materials of the reflection surfaces, mainly. This audio processing is represented by the sound-i boxes in the image above and is further expanded in the image below.</p>
<div class="image">
<img src="audio3.png" alt="audio3.png"/>
<div class="caption">
Individual sound processing block diagram</div></div>
<p>The anechoic sound source buffer is a ring buffer that contains the anechoic audio data of the sound source, supplied by <a class="el" href="aave_8h.html#a546bf3fff8b9009ddc744a6908154f5e">aave_put_audio()</a>. Each sound originated from this sound source gets its input audio data from this ring buffer, from the delayed audio sample position corresponding to the travelled distance of that particular sound.</p>
<p>When the listener or sound sources move, the travelled distances change, in a discontinuous manner, since the positions' update rate is usually much lower than the audio sampling rate. The resampler block is responsible for producing a stream of audio data without discontinuities, from the discontinuous distance values. It does this by upsampling and low-pass filtering the distance values, and then interpolating (zero-order) the audio samples in the ring buffer with the corresponding fractional delay, as described in: Peter Brinkman and Michael Gogins, "Doppler effects without equations", Proc. of the 16th Int. Conf. on Digital Audio Effects (DAFx-13).</p>
<p>The HRTF processing is performed in the frequency domain, using the fast convolution method mentioned in: Udo Zolzer, "Digital Audio Signal
Processing", 2nd Edition, Section 5.3 Nonrecursive Audio Filters. The DFT block thus zero-pads and converts the audio data from time domain to frequency domain, in <a class="el" href="dft_8h.html">dft.h</a>. Note that, without the resampler block, three DFT blocks would be needed instead of just one.</p>
<p>The material absorption filter block implements the sound attenuation by frequency band of the materials of the surfaces where the sound reflects. This filtering is efficiently performed in the frequency domain simply by calculating N complex multiplications, in <a class="el" href="audio_8c.html#a5949cca50430419a0d66b75f6bf5793a">cmul()</a>. The design of the filter is implemented in <a class="el" href="material_8c.html">material.c</a>.</p>
<p>The anechoic sound is turned into binaural by applying the HRTF pair that corresponds to the direction (elevation and azimuth) of arrival of the sound relative to the listener's head. When the listener moves her head, the HRTF pair changes. This causes discontinuities in the output binaural sound, mainly due to the phase differences between the previous and current HRTF pair. The greater the movement, the more audible these discontinuities are. To mask these discontinuities, it is implemented a method that applies both HRTF pairs, corresponding to the previous and current directions, and then fades-out the previous and fades-in the current. It is a multiple-sound and binaural version of the algorithm described in: Tom Barker et al, "Real-time auralisation system for virtual microphone
positioning", Proc. of the 15th Int. Conf. on Digital Audio Effects (DAFx12).</p>
<p>The fade-in/out gains of appearing/disappearing sounds and the amplitude attenuations of sounds with distance are also performed in the frequency domain, taking advantage that they can be applied at the same time the HRTF filter is, simply by multiplying the magnitude of the frequency response by the appropriate combined gain value, in <a class="el" href="audio_8c.html#a4e6a8bd6af1e6e28fb9f4a59802913d6">cmadd()</a>.</p>
<p>The result of each sound processing block is therefore 3 binaural audio signals (6 total), still in the frequency domain: DFT bus 0 with the current anechoic audio block processed with the previous distance and direction parametres, DFT bus 1 with the previous block processed with the current parametres, and DFT bus 2 with the current block processed with the current parametres.</p>
<p>The binaural audio signals now need to be converted back to the time domain. But instead of performing 6 inverse discrete Fourier transforms (IDFT) per sound and then summing them in the time domain, the different sounds are summed still in the frequency domain, into the DFT busses pictured. This way, only 6 IDFT are performed in total, independently of the number of sounds.</p>
<p>To complete the fast convolution method, the sounds in the 6 busses, now in the time domain, are overlap-added, as described in: Udo Zolzer, "Digital Audio Signal Processing", 2nd Edition, Section 5.3.2 Fast Convolution of Long Sequences. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Here, it might be more efficient to use the overlap-save method instead of the overlap-add method.</dd></dl>
<p>Linear fade-outs and fade-ins are then applied to the previous and current parametre busses, respectively, to complete the crossfade method described in Tom Barker et al (see above).</p>
<p>At this point, the left and right signals contain the binaural auralisation of the direct sounds and reflection sounds up to a given reflection order. An artificial reverberation tail, implemented in reverb.c, is finally added to simulate the late reflections that the <a class="el" href="geometry_8c.html">geometry.c</a> part could not calculate. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a7921e52736402cbfff73045ce89695e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AAVE_DISTANCE_B1&#160;&#160;&#160;0.99977</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The b1 coefficient of the single-pole, low-pass, recursive filter implemented in the resampler block to smooth the distance values:</p>
<p>y[n] = b1 * y[n-1] + (1 - b1) * x[n]</p>
<p>Design steps:</p>
<p>d = number of samples for the filter to decay to 36.8%</p>
<p>If the distance is updated at about 10Hz (0.1s), then we could make:</p>
<p>d = 0.1 * fs = 0.1 * 44100 = 4410 samples</p>
<p>Then obtain the b1 coefficient:</p>
<p>b1 = exp(-1/d) = exp(-1/4410) ~= 0.99977</p>
<p>Reference: The Scientist and Engineer's Guide to DSP, chapter 19. </p>

</div>
</div>
<a class="anchor" id="addce93e897e9f71ef5c263ffd893f831"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AAVE_FADE_SAMPLES&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Duration of the fade-in/out for appearing/disappering sounds, in number of audio samples (must be a multiple of AAVE_MAX_HRTF): 4096 samples / 44100 Hz ~= 93ms. </p>

</div>
</div>
<a class="anchor" id="a11ddec9c2a797ebe5e6b6f2ae522404f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFT_TYPE&#160;&#160;&#160;short</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a <a class="el" href="dft_8h.html#ad9584a3bdc946bf6faece23f05dc797d">dft()</a> function to convert 16-bit audio samples to frequency. </p>

</div>
</div>
<a class="anchor" id="afd47bdf71dbf8a1adbddc63efd267700"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IDFT_TYPE&#160;&#160;&#160;int</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an <a class="el" href="idft_8h.html#a797484e3f3d53d566ececbcfcd90f537">idft()</a> function to convert frequency to 32-bit audio samples. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8dfc247d60dfeb02fe97ae7353731506"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void aave_audio_source_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaave__sound.html">aave_sound</a> *&#160;</td>
          <td class="paramname"><em>sound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>frames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generate one audio source block. <code>sound</code> is the sound whose source to get the anechoic audio data from, <code>distance</code> is the distance from the (image) source to the listener, <code>x</code> is the buffer to store the generated audio data, <code>frames</code> is the number of frames (anechoic samples) to generate, and <code>delay</code> is the number of frames of pre-delay to apply to the sound to account for audio user blocks larger than the size of the HRTFs.</p>
<p>The distance value changes abruptly between audio blocks every time the listener or the sound source move. To generate audio blocks without discontinuities, the anechoic samples of the sound source are resampled, using first-order interpolation (linear interpolation), a good compromise between audio quality and processing time, to match an upsampled and low- pass filtered version of the discontinuous distance value, as described in Peter Brinkman and Michael Gogins, "Doppler effects without equations", Proc. of the 16th Int. Conf. on Digital Audio Effects (DAFx-13). </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a8dfc247d60dfeb02fe97ae7353731506_cgraph.png" border="0" usemap="#audio_8c_a8dfc247d60dfeb02fe97ae7353731506_cgraph" alt=""/></div>
<map name="audio_8c_a8dfc247d60dfeb02fe97ae7353731506_cgraph" id="audio_8c_a8dfc247d60dfeb02fe97ae7353731506_cgraph">
<area shape="rect" id="node3" href="reverb__dattorro_8c.html#a71156a2bb7fe5562368cb958346b2766" title="delay" alt="" coords="227,5,280,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a8dfc247d60dfeb02fe97ae7353731506_icgraph.png" border="0" usemap="#audio_8c_a8dfc247d60dfeb02fe97ae7353731506_icgraph" alt=""/></div>
<map name="audio_8c_a8dfc247d60dfeb02fe97ae7353731506_icgraph" id="audio_8c_a8dfc247d60dfeb02fe97ae7353731506_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0" title="aave_hrtf_add_sound" alt="" coords="227,13,373,43"/><area shape="rect" id="node5" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="421,5,560,51"/><area shape="rect" id="node7" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="609,13,721,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afe43a0d12af335e2f133c0da2a99422f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aave_get_audio </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaave.html">aave</a> *&#160;</td>
          <td class="paramname"><em>aave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate <code>n</code> 16-bit 2-channel frames of the auralisation world <code>aave</code> and put them in the memory location pointed by <code>buf</code>. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_afe43a0d12af335e2f133c0da2a99422f_cgraph.png" border="0" usemap="#audio_8c_afe43a0d12af335e2f133c0da2a99422f_cgraph" alt=""/></div>
<map name="audio_8c_afe43a0d12af335e2f133c0da2a99422f_cgraph" id="audio_8c_afe43a0d12af335e2f133c0da2a99422f_cgraph">
<area shape="rect" id="node3" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="168,263,307,310"/><area shape="rect" id="node31" href="aave_8h.html#aa5850eee4b27f5b7f2732f3457e00d79" title="aave_reverb_jot" alt="" coords="180,440,295,469"/><area shape="rect" id="node5" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0" title="aave_hrtf_add_sound" alt="" coords="364,165,511,195"/><area shape="rect" id="node25" href="idft_8h.html#a797484e3f3d53d566ececbcfcd90f537" title="idft" alt="" coords="417,219,457,248"/><area shape="rect" id="node27" href="audio_8c.html#a3bff6ddd40eda3065aa82561d23e51a6" title="fade_out_gain" alt="" coords="387,272,488,301"/><area shape="rect" id="node29" href="audio_8c.html#a0ed45f17383de6ca52241b5ac60a10b2" title="fade_in_gain" alt="" coords="391,325,484,355"/><area shape="rect" id="node7" href="aave_8h.html#a98cd836fde1ac54fc6dcbb3aab416d8b" title="aave_get_coordinates" alt="" coords="580,32,729,61"/><area shape="rect" id="node13" href="audio_8c.html#a01cdef4fc35ac0cf58e59bed7c2af7d9" title="attenuation" alt="" coords="612,85,697,115"/><area shape="rect" id="node15" href="audio_8c.html#a4e6a8bd6af1e6e28fb9f4a59802913d6" title="cmadd" alt="" coords="624,139,685,168"/><area shape="rect" id="node17" href="audio_8c.html#a8dfc247d60dfeb02fe97ae7353731506" title="aave_audio_source_block" alt="" coords="569,192,740,221"/><area shape="rect" id="node21" href="dft_8h.html#ad9584a3bdc946bf6faece23f05dc797d" title="dft" alt="" coords="636,245,673,275"/><area shape="rect" id="node23" href="audio_8c.html#a5949cca50430419a0d66b75f6bf5793a" title="cmul" alt="" coords="629,299,680,328"/><area shape="rect" id="node9" href="geometry_8c.html#adbb79889a33b12c8b090faa854af8109" title="norm" alt="" coords="809,5,860,35"/><area shape="rect" id="node11" href="geometry_8c.html#a373b4381636c15ec96dbc6f3e4655798" title="dot_product" alt="" coords="789,59,880,88"/><area shape="rect" id="node19" href="reverb__dattorro_8c.html#a71156a2bb7fe5562368cb958346b2766" title="delay" alt="" coords="808,192,861,221"/><area shape="rect" id="node33" href="reverb__jot_8c.html#adfb45e598332882d56cac622886147ae" title="process_delay_filter" alt="" coords="368,379,507,408"/><area shape="rect" id="node35" href="reverb__jot_8c.html#a4753c93200af2f79be012df00c909ad2" title="process_absorption\l_filter" alt="" coords="371,431,504,478"/><area shape="rect" id="node37" href="reverb__jot_8c.html#a904becb2ca4872b962837189114bfaab" title="process_tone_correction\l_filter" alt="" coords="356,501,519,547"/><area shape="rect" id="node39" href="reverb__jot_8c.html#a23bb515e413d3a0cfea9371ec630309c" title="process_dc_block_filter" alt="" coords="359,571,516,600"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a74e68044085a9e60e9d9065100a520b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void aave_hrtf_add_sound </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaave.html">aave</a> *&#160;</td>
          <td class="paramname"><em>aave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaave__sound.html">aave_sound</a> *&#160;</td>
          <td class="paramname"><em>sound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ydft</em>[3][2][AAVE_MAX_HRTF *4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>frames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Process one <code>sound</code> and add it to the DFT busses <code>ydft</code>. <code>frames</code> is the number of frames to process. <code>delay</code> is the number of frames of pre-delay to apply to the sound to account for audio user blocks larger than the size of the HRTFs. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a74e68044085a9e60e9d9065100a520b0_cgraph.png" border="0" usemap="#audio_8c_a74e68044085a9e60e9d9065100a520b0_cgraph" alt=""/></div>
<map name="audio_8c_a74e68044085a9e60e9d9065100a520b0_cgraph" id="audio_8c_a74e68044085a9e60e9d9065100a520b0_cgraph">
<area shape="rect" id="node3" href="aave_8h.html#a98cd836fde1ac54fc6dcbb3aab416d8b" title="aave_get_coordinates" alt="" coords="212,32,361,61"/><area shape="rect" id="node9" href="audio_8c.html#a01cdef4fc35ac0cf58e59bed7c2af7d9" title="attenuation" alt="" coords="244,85,329,115"/><area shape="rect" id="node11" href="audio_8c.html#a4e6a8bd6af1e6e28fb9f4a59802913d6" title="cmadd" alt="" coords="256,139,317,168"/><area shape="rect" id="node13" href="audio_8c.html#a8dfc247d60dfeb02fe97ae7353731506" title="aave_audio_source_block" alt="" coords="201,192,372,221"/><area shape="rect" id="node17" href="dft_8h.html#ad9584a3bdc946bf6faece23f05dc797d" title="dft" alt="" coords="268,245,305,275"/><area shape="rect" id="node19" href="audio_8c.html#a5949cca50430419a0d66b75f6bf5793a" title="cmul" alt="" coords="261,299,312,328"/><area shape="rect" id="node5" href="geometry_8c.html#adbb79889a33b12c8b090faa854af8109" title="norm" alt="" coords="441,5,492,35"/><area shape="rect" id="node7" href="geometry_8c.html#a373b4381636c15ec96dbc6f3e4655798" title="dot_product" alt="" coords="421,59,512,88"/><area shape="rect" id="node15" href="reverb__dattorro_8c.html#a71156a2bb7fe5562368cb958346b2766" title="delay" alt="" coords="440,192,493,221"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a74e68044085a9e60e9d9065100a520b0_icgraph.png" border="0" usemap="#audio_8c_a74e68044085a9e60e9d9065100a520b0_icgraph" alt=""/></div>
<map name="audio_8c_a74e68044085a9e60e9d9065100a520b0_icgraph" id="audio_8c_a74e68044085a9e60e9d9065100a520b0_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="200,5,339,51"/><area shape="rect" id="node5" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="388,13,500,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0435bc74e8d5edca85e72ab93a72bc37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void aave_hrtf_fill_output_buffer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaave.html">aave</a> *&#160;</td>
          <td class="paramname"><em>aave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>frames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generate one audio buffer of binaural data for the auralisation world <code>aave</code> with all sounds in it. <code>frames</code> is the number of frames to generate. <code>delay</code> is the number of frames of pre-delay to apply to all sounds to account for audio user blocks larger than the size of the HRTFs. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_cgraph.png" border="0" usemap="#audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_cgraph" alt=""/></div>
<map name="audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_cgraph" id="audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_cgraph">
<area shape="rect" id="node3" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0" title="aave_hrtf_add_sound" alt="" coords="192,165,339,195"/><area shape="rect" id="node23" href="idft_8h.html#a797484e3f3d53d566ececbcfcd90f537" title="idft" alt="" coords="245,219,285,248"/><area shape="rect" id="node25" href="audio_8c.html#a3bff6ddd40eda3065aa82561d23e51a6" title="fade_out_gain" alt="" coords="215,272,316,301"/><area shape="rect" id="node27" href="audio_8c.html#a0ed45f17383de6ca52241b5ac60a10b2" title="fade_in_gain" alt="" coords="219,325,312,355"/><area shape="rect" id="node5" href="aave_8h.html#a98cd836fde1ac54fc6dcbb3aab416d8b" title="aave_get_coordinates" alt="" coords="399,32,548,61"/><area shape="rect" id="node11" href="audio_8c.html#a01cdef4fc35ac0cf58e59bed7c2af7d9" title="attenuation" alt="" coords="431,85,516,115"/><area shape="rect" id="node13" href="audio_8c.html#a4e6a8bd6af1e6e28fb9f4a59802913d6" title="cmadd" alt="" coords="443,139,504,168"/><area shape="rect" id="node15" href="audio_8c.html#a8dfc247d60dfeb02fe97ae7353731506" title="aave_audio_source_block" alt="" coords="388,192,559,221"/><area shape="rect" id="node19" href="dft_8h.html#ad9584a3bdc946bf6faece23f05dc797d" title="dft" alt="" coords="455,245,492,275"/><area shape="rect" id="node21" href="audio_8c.html#a5949cca50430419a0d66b75f6bf5793a" title="cmul" alt="" coords="448,299,499,328"/><area shape="rect" id="node7" href="geometry_8c.html#adbb79889a33b12c8b090faa854af8109" title="norm" alt="" coords="628,5,679,35"/><area shape="rect" id="node9" href="geometry_8c.html#a373b4381636c15ec96dbc6f3e4655798" title="dot_product" alt="" coords="608,59,699,88"/><area shape="rect" id="node17" href="reverb__dattorro_8c.html#a71156a2bb7fe5562368cb958346b2766" title="delay" alt="" coords="627,192,680,221"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_icgraph.png" border="0" usemap="#audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_icgraph" alt=""/></div>
<map name="audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_icgraph" id="audio_8c_a0435bc74e8d5edca85e72ab93a72bc37_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="193,13,305,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8652f21a39abdea73f6ad975ad7af5fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aave_put_audio </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaave__source.html">aave_source</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const short *&#160;</td>
          <td class="paramname"><em>audio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Put the <code>n</code> frames pointed by <code>audio</code> in the ring buffer of <code>source</code>. </p>

</div>
</div>
<a class="anchor" id="a01cdef4fc35ac0cf58e59bed7c2af7d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float attenuation </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>distance</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the gain corresponding to the amplitude attenuation of a sound at the specified <code>distance</code> (m). </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a01cdef4fc35ac0cf58e59bed7c2af7d9_icgraph.png" border="0" usemap="#audio_8c_a01cdef4fc35ac0cf58e59bed7c2af7d9_icgraph" alt=""/></div>
<map name="audio_8c_a01cdef4fc35ac0cf58e59bed7c2af7d9_icgraph" id="audio_8c_a01cdef4fc35ac0cf58e59bed7c2af7d9_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0" title="aave_hrtf_add_sound" alt="" coords="141,13,288,43"/><area shape="rect" id="node5" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="336,5,475,51"/><area shape="rect" id="node7" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="524,13,636,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4e6a8bd6af1e6e28fb9f4a59802913d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cmadd </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>g</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate the Complex Multiplication and ADDition <code>y</code> += <code>g</code> * <code>a</code> * <code>b</code> of size <code>n</code>.</p>
<p>Y += g * A * B</p>
<p>Y += g * (ar + j ai) * (br + j br)</p>
<p>Y += g * (ar * br - ai * bi) + j g * (ar * bi + ai * br) </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a4e6a8bd6af1e6e28fb9f4a59802913d6_icgraph.png" border="0" usemap="#audio_8c_a4e6a8bd6af1e6e28fb9f4a59802913d6_icgraph" alt=""/></div>
<map name="audio_8c_a4e6a8bd6af1e6e28fb9f4a59802913d6_icgraph" id="audio_8c_a4e6a8bd6af1e6e28fb9f4a59802913d6_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0" title="aave_hrtf_add_sound" alt="" coords="115,13,261,43"/><area shape="rect" id="node5" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="309,5,448,51"/><area shape="rect" id="node7" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="497,13,609,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5949cca50430419a0d66b75f6bf5793a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cmul </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate the Complex MULtiplication <code>a</code> = <code>a</code> * <code>b</code> of size <code>n</code>.</p>
<p>A = A * B</p>
<p>A = (ar + j ai) * (br + j br)</p>
<p>A = (ar * br - ai * bi) + j (ar * bi + ai * br) </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a5949cca50430419a0d66b75f6bf5793a_icgraph.png" border="0" usemap="#audio_8c_a5949cca50430419a0d66b75f6bf5793a_icgraph" alt=""/></div>
<map name="audio_8c_a5949cca50430419a0d66b75f6bf5793a_icgraph" id="audio_8c_a5949cca50430419a0d66b75f6bf5793a_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0" title="aave_hrtf_add_sound" alt="" coords="104,13,251,43"/><area shape="rect" id="node5" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="299,5,437,51"/><area shape="rect" id="node7" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="487,13,599,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ed45f17383de6ca52241b5ac60a10b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float fade_in_gain </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>frames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the fade-in gain at index <code>i</code> for a window of the specified <code>frames</code>. </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a0ed45f17383de6ca52241b5ac60a10b2_icgraph.png" border="0" usemap="#audio_8c_a0ed45f17383de6ca52241b5ac60a10b2_icgraph" alt=""/></div>
<map name="audio_8c_a0ed45f17383de6ca52241b5ac60a10b2_icgraph" id="audio_8c_a0ed45f17383de6ca52241b5ac60a10b2_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="149,5,288,51"/><area shape="rect" id="node5" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="337,13,449,43"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3bff6ddd40eda3065aa82561d23e51a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float fade_out_gain </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>frames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the fade-out gain at index <code>i</code> for a window of the specified <code>frames</code>. </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="audio_8c_a3bff6ddd40eda3065aa82561d23e51a6_icgraph.png" border="0" usemap="#audio_8c_a3bff6ddd40eda3065aa82561d23e51a6_icgraph" alt=""/></div>
<map name="audio_8c_a3bff6ddd40eda3065aa82561d23e51a6_icgraph" id="audio_8c_a3bff6ddd40eda3065aa82561d23e51a6_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="157,5,296,51"/><area shape="rect" id="node5" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="345,13,457,43"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 14 2014 16:47:18 for AcousticAVE library (libaave) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
