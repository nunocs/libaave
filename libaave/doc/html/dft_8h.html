<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>AcousticAVE library (libaave): dft.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AcousticAVE library (libaave)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dft.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="dft_8h__dep__incl.png" border="0" usemap="#dft_8hdep" alt=""/></div>
<map name="dft_8hdep" id="dft_8hdep">
<area shape="rect" id="node3" href="audio_8c.html" title="audio.c" alt="" coords="5,83,69,112"/><area shape="rect" id="node5" href="material_8c.html" title="material.c" alt="" coords="93,83,171,112"/></map>
</div>
</div>
<p><a href="dft_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad9584a3bdc946bf6faece23f05dc797d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dft_8h.html#ad9584a3bdc946bf6faece23f05dc797d">dft</a> (float *X, const <a class="el" href="material_8c.html#a11ddec9c2a797ebe5e6b6f2ae522404f">DFT_TYPE</a> *x, unsigned n)</td></tr>
<tr class="separator:ad9584a3bdc946bf6faece23f05dc797d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3196640d8e9b871f615b6a42a6b77123"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dft_8h.html#a3196640d8e9b871f615b6a42a6b77123">dftsincos</a> [][2]</td></tr>
<tr class="separator:a3196640d8e9b871f615b6a42a6b77123"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="dft_8h.html">dft.h</a> file implements the discrete Fourier transform (DFT) of real-input data of power-of-2 sizes, using the Cooley-Tukey FFT algorithm (<a href="http://en.wikipedia.org/wiki/Cooley%E2%80%93Tukey_FFT_algorithm">http://en.wikipedia.org/wiki/Cooley%E2%80%93Tukey_FFT_algorithm</a>).</p>
<p>It is about 3 times faster than the equivalent real input to complex-Hermitian output plan fftw_plan_dft_r2c_1d of the fftw library (<a href="http://www.fftw.org/">http://www.fftw.org/</a>). Furthermore, it implicitly type-converts and zero-pads the input data to twice the size, making the comparison even more favorable for this implementation.</p>
<p>The drawback is that the ouput Fourier coefficients end up unordered. However, this is irrevelant for our main purpose of performing fast convolutions, because the corresponding inverse discrete Fourier transform (IDFT) implemented in <a class="el" href="idft_8h.html">idft.h</a> also uses the same order. For the case where it is necessary to know the order of the Fourier coefficients, namely the design of the material absorption filters in <a class="el" href="material_8c.html">material.c</a>, the function <a class="el" href="aave_8h.html#a5b453c8df5597105b3a7cde336e83e0e">dft_index()</a> can be used to retrieve the Fourier coefficients in any desired order.</p>
<p>This <a class="el" href="dft_8h.html">dft.h</a> file is implemented as a "template". To create a <a class="el" href="dft_8h.html#ad9584a3bdc946bf6faece23f05dc797d">dft()</a> function to use in your source code to transform input data of some type, for example type short (16-bit audio samples), include the following in your source code file: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#define DFT_TYPE short</span></div>
<div class="line"><span class="preprocessor">#include &quot;dft.h&quot;</span></div>
</div><!-- fragment --><p> This will insert a static <a class="el" href="dft_8h.html#ad9584a3bdc946bf6faece23f05dc797d">dft()</a> function in your source code file that calculates the Fourier coefficients of an array of short integers. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad9584a3bdc946bf6faece23f05dc797d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dft </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="material_8c.html#a11ddec9c2a797ebe5e6b6f2ae522404f">DFT_TYPE</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This dft function calculates the <code>n</code> point discrete Fourier transform of the zero-padded real-input data values pointed by <code>x</code> and stores the Fourier coefficients in <code>X</code>. <code>x</code> points to <code>n</code> / 2 elements (elements <code>n</code> / 2 to <code>n</code> - 1 are implicitly zero-padded). <code>X</code> points to <code>n</code> elements, which correspond to the Fourier coefficients 0 to <code>n</code> / 2, (un)ordered as follows:</p>
<ul>
<li>X[0] = X[0].real;</li>
<li>X[1] = X[N/2].real;</li>
<li>X[2] = X[N/4].real;</li>
<li>X[3] = X[N/4].imag;</li>
<li>etc... (see <a class="el" href="aave_8h.html#a5b453c8df5597105b3a7cde336e83e0e">dft_index()</a> for the complete ordering)</li>
</ul>
<p>Remember that when the input data is real:</p>
<ul>
<li>X[0].imag = 0;</li>
<li>X[N/2].imag = 0;</li>
<li>X[N/2+i].real = X[N/2-i].real;</li>
<li>X[N/2+i].imag = - X[N/2-i].imag; </li>
</ul>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dft_8h_ad9584a3bdc946bf6faece23f05dc797d_icgraph.png" border="0" usemap="#dft_8h_ad9584a3bdc946bf6faece23f05dc797d_icgraph" alt=""/></div>
<map name="dft_8h_ad9584a3bdc946bf6faece23f05dc797d_icgraph" id="dft_8h_ad9584a3bdc946bf6faece23f05dc797d_icgraph">
<area shape="rect" id="node3" href="audio_8c.html#a74e68044085a9e60e9d9065100a520b0" title="aave_hrtf_add_sound" alt="" coords="93,16,240,45"/><area shape="rect" id="node9" href="material_8c.html#a6dc2bc04b22f0f36f848d5ac79376153" title="aave_material_filter" alt="" coords="100,71,233,100"/><area shape="rect" id="node5" href="audio_8c.html#a0435bc74e8d5edca85e72ab93a72bc37" title="aave_hrtf_fill_output\l_buffer" alt="" coords="299,5,437,51"/><area shape="rect" id="node7" href="audio_8c.html#afe43a0d12af335e2f133c0da2a99422f" title="aave_get_audio" alt="" coords="508,13,620,43"/><area shape="rect" id="node11" href="material_8c.html#a1f3208f696d3dbfbe5ac76fbb739f922" title="aave_get_material_filter" alt="" coords="288,75,448,104"/><area shape="rect" id="node13" href="geometry_8c.html#a59ff10a7f9bd39866063bb05918d3df0" title="aave_create_sound" alt="" coords="497,75,631,104"/><area shape="rect" id="node15" href="geometry_8c.html#a2c55d6e06ff73570a887d18807442412" title="aave_create_sounds\l_recursively" alt="" coords="681,66,823,113"/><area shape="rect" id="node17" href="geometry_8c.html#ab67540c77da19bfc111eaa423d500d33" title="aave_create_sounds" alt="" coords="873,75,1015,104"/><area shape="rect" id="node19" href="geometry_8c.html#a128fc0893ce9e549392265802bf62d20" title="aave_update" alt="" coords="1064,75,1160,104"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a3196640d8e9b871f615b6a42a6b77123"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float dftsincos[][2]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Table with the pre-calculated sin() and cos() values. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 14 2014 16:47:18 for AcousticAVE library (libaave) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
